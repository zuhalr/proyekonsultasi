var UIModals=function(){var n=function(){$("#draggable").draggable({handle:".modal-header"})};return{init:function(){n()}}}();jQuery(document).ready(function(){UIModals.init()});jQuery(document).ready(function(){$('.reset').click(function(){$('.judul').html('<i class="icon-puzzle"></i> Categories');$('.forms')[0].reset();});$('.ecat').click(function(){var id=$(this).attr('data-id');$.ajax({url:dns+'cms/categories/detail/'+id,type:'GET',dataType:"JSON",success:function(data){if(data.code=='200'){$('.judul').html('<i class="icon-puzzle"></i> Edit Categories');$('#id').val(data.id);$('#name').val(data.name);$('#slug').val(data.slug);$('#description').val(data.description);}},error:function(jqXHR,textStatus,errorThrown){toastr_show('warning','Failed');}});});$('.scat').click(function(){var id=$(this).attr('data-id');$.ajax({url:dns+'cms/categories/status/'+id,type:'GET',dataType:"JSON",success:function(data){toastr_show('success','Success');location.reload();},error:function(jqXHR,textStatus,errorThrown){toastr_show('warning','Failed');}});});$('.dcat').click(function(){var id=$(this).attr('data-id');$.ajax({url:dns+'cms/categories/delete/'+id,type:'GET',dataType:"JSON",success:function(data){toastr_show('success','Success');location.reload();},error:function(jqXHR,textStatus,errorThrown){toastr_show('warning','Failed');}});});$('#cats').find('.select2').select2({theme:"bootstrap"}).change(function(e){$(this).valid();}).end().validate({errorClass:'help-block',errorElement:'div',errorPlacement:function(error,element){if(element.attr('type')=='radio'||element.attr('type')=='checkbox'){error.insertAfter('.span');}else if(element.hasClass('select2')){error.insertAfter(element.next('span'));}else{if(element.parent('.input-group').length){error.insertAfter(element.parent());}else{error.insertAfter(element);}}},highlight:function(element,errorClass,validClass){$(element).parents(".form-group").addClass("has-error").removeClass("has-success");},unhighlight:function(element,errorClass,validClass){$(element).parents(".form-group").addClass("has-success").removeClass("has-error");},success:function(error){error.closest('.form-group').removeClass('has-success has-error');error.remove();},submitHandler:function(form){if($('#id').val()!=''){url=dns+'cms/categories/update';}else{url=dns+'cms/categories/create';}
$.ajax({url:url,type:'POST',data:new FormData(document.getElementById('cats')),dataType:"JSON",contentType:false,processData:false,cache:false,async:true,beforeSend:function(){App.blockUI({target:"body",boxed:!0,message:"Processing..."}),window.setTimeout(function(){},2e3)},success:function(data){toastr_show('success','Success');$('#cats')[0].reset();$('.form-group').removeClass('has-success');location.reload();}});},rules:{name:{required:true},slug:{required:true},description:{required:false},},messages:{name:{required:'Tag name is required'},slug:{required:'Slug is required'},description:{required:'Description is required'},}});$('.etag').click(function(){var id=$(this).attr('data-id');$.ajax({url:dns+'cms/tags/detail/'+id,type:'GET',dataType:"JSON",success:function(data){if(data.code=='200'){$('.judul').html('<i class="icon-puzzle"></i> Edit Categories');$('#id').val(data.id);$('#name').val(data.name);$('#slug').val(data.slug);$('#description').val(data.description);}},error:function(jqXHR,textStatus,errorThrown){toastr_show('warning','Failed');}});});$('.stag').click(function(){var id=$(this).attr('data-id');$.ajax({url:dns+'cms/tags/status/'+id,type:'GET',dataType:"JSON",success:function(data){toastr_show('success','Success');location.reload();},error:function(jqXHR,textStatus,errorThrown){toastr_show('warning','Failed');}});});$('.dtag').click(function(){var id=$(this).attr('data-id');$.ajax({url:dns+'cms/tags/delete/'+id,type:'GET',dataType:"JSON",success:function(data){toastr_show('success','Success');location.reload();},error:function(jqXHR,textStatus,errorThrown){toastr_show('warning','Failed');}});});$('#tags').find('.select2').select2({theme:"bootstrap"}).change(function(e){$(this).valid();}).end().validate({errorClass:'help-block',errorElement:'div',errorPlacement:function(error,element){if(element.attr('type')=='radio'||element.attr('type')=='checkbox'){error.insertAfter('.span');}else if(element.hasClass('select2')){error.insertAfter(element.next('span'));}else{if(element.parent('.input-group').length){error.insertAfter(element.parent());}else{error.insertAfter(element);}}},highlight:function(element,errorClass,validClass){$(element).parents(".form-group").addClass("has-error").removeClass("has-success");},unhighlight:function(element,errorClass,validClass){$(element).parents(".form-group").addClass("has-success").removeClass("has-error");},success:function(error){error.closest('.form-group').removeClass('has-success has-error');error.remove();},submitHandler:function(form){if($('#id').val()!=''){url=dns+'cms/tags/update';}else{url=dns+'cms/tags/create';}
$.ajax({url:url,type:'POST',data:new FormData(document.getElementById('tags')),dataType:"JSON",contentType:false,processData:false,cache:false,async:true,beforeSend:function(){App.blockUI({target:"body",boxed:!0,message:"Processing..."}),window.setTimeout(function(){},2e3)},success:function(data){toastr_show('success','Success');$('#tags')[0].reset();$('.form-group').removeClass('has-success');location.reload();}});},rules:{name:{required:true},slug:{required:true},description:{required:false},},messages:{name:{required:'Tag name is required'},slug:{required:'Slug is required'},description:{required:'Description is required'},}});$('#redactor_content').redactor({imageUpload:'../demo/scripts/image_upload.php',fileUpload:'../demo/scripts/file_upload.php',imageGetJson:'../demo/json/data.json'});});function toastr_show(type,text){toastr[type](text);toastr.options={"closeButton":false,"debug":false,"newestOnTop":false,"progressBar":false,"positionClass":"toast-top-right","preventDuplicates":false,"onclick":null,"showDuration":"300","hideDuration":"1000","timeOut":"8000","extendedTimeOut":"1000","showEasing":"swing","hideEasing":"linear","showMethod":"fadeIn","hideMethod":"fadeOut"}}